# Лекции 207. Redux Toolkit: createAction()

* Официальная документация  
  DOC [ENG] (https://redux-toolkit.js.org/api/createAction)

------------------------------------------------------------------    
* createAction в Redux Toolkit — это удобная утилита, которая значительно упрощает 
* создание экшен-криэйторов (action creators) и соответствующих типов экшенов (action types).

* Представьте, что это "фабрика" для экшенов.

* Что делает createAction?

  - Генерирует уникальный тип экшена: Вы передаёте строку (например, 'todos/add'), 
    и createAction создаёт константу с этим именем, которая является строковым 
    идентификатором для вашего экшена.

  - Создаёт функцию-экшен-криэйтор: Он возвращает функцию, которую вы можете вызывать 
    (например, addTodo(payloadData)). Эта функция при вызове автоматически формирует 
    и возвращает полноценный объект экшена { type: 'ваш/тип', payload: payloadData }.  
  
    **Основные преимущества:**

    **Меньше шаблонного кода (boilerplate):** 
      Устраняет необходимость вручную определять строковые константы и писать функции-экшен-криэйторы.

    **Безопасность типов:**
      Снижает вероятность опечаток, так как тип экшена автоматически связан с функцией-криэйтором.

    **Автоматическое формирование payload:**
      Если вы просто передаёте данные в addTodo(), 
      они автоматически становятся полем payload в экшене.

    **Функция prepare:**
      Позволяет добавить более сложную логику для формирования payload или других полей экшена 
      (как в вашем примере с nanoid() и createdAt).  
  
* Пример кода из документации с коментариями:  
```js
import { createAction } from '@reduxjs/toolkit'; // Импортируем createAction из Redux Toolkit.
import { nanoid } from 'nanoid'; // Импортируем nanoid для генерации уникальных ID.

/**
 * `addTodo` - это action creator, созданный с помощью `createAction` из Redux Toolkit.
 *
 * `createAction` упрощает создание экшен-типов и соответствующих функций-создателей экшенов.
 * В данном случае, автоматически будет создан тип экшена 'todos/add'.
 *
 * Функция `prepare` (функция подготовки) - это необязательная особенность `createAction`.
 * Она используется для того, чтобы:
 * 1. Выполнить любую логику перед созданием экшена.
 * 2. Сгенерировать поле `payload` экшена.
 * 3. Добавить любые дополнительные поля (например, `meta`, `error`) к экшену.
 *
 * Здесь `prepare` используется для:
 * - Приёма текстового описания задачи (`text`).
 * - Генерации уникального идентификатора (`id`) с помощью `nanoid()`.
 * - Добавления метки времени создания (`createdAt`) в формате ISO.
 * - Формирования объекта `payload`, который будет включен в финальный экшен.
 *
 * @param {string} text - Текстовое описание новой задачи.
 * @returns {object} Объект экшена с типом 'todos/add' и сформированным `payload`.
 * Пример возвращаемого экшена: `{ type: 'todos/add', payload: { text: 'Купить молоко',
 * id: 'someId', createdAt: 'ISOString' } }`
 */
// Указываем тип экшена 'todos/add' и функцию подготовки `prepare`.
const addTodo = createAction('todos/add', function prepare(text) { 
  return {
    payload: { // Формируем объект `payload`, который будет содержимым экшена.
      text, // Текст задачи, переданный в `addTodo()`.
      id: nanoid(), // Генерируем уникальный ID для новой задачи.
      // Добавляем текущую дату и время создания задачи в формате ISO.
      createdAt: new Date().toISOString(), 
    },
  };
});
```