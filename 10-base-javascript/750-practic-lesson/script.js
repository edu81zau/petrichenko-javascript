/**
 
Ð—Ð°Ð´Ð°Ð½Ð¸Ðµ:

Ð’ Ð¼Ð°Ñ‚ÐµÐ¼Ð°Ñ‚Ð¸ÐºÐµ ÐµÑÑ‚ÑŒ Ñ‚Ð°ÐºÐ¾Ðµ Ð¿Ð¾Ð½ÑÑ‚Ð¸Ðµ, ÐºÐ°Ðº ÐºÐ¾Ð¼Ð¿Ð¾Ð·Ð¸Ñ†Ð¸Ñ Ñ„ÑƒÐ½ÐºÑ†Ð¸Ð¹. Ð’ Ð¿Ñ€Ð¾Ð³Ñ€Ð°Ð¼Ð¼Ð¸Ñ€Ð¾Ð²Ð°Ð½Ð¸Ðµ ÑÑ‚Ð¾Ñ‚ Ð¿Ñ€Ð¸ÐµÐ¼
Ñ‚Ð¾Ð¶Ðµ Ð¿ÐµÑ€ÐµÐºÐ¾Ñ‡ÐµÐ²Ð°Ð» Ð¸ ÑÐ²Ð»ÑÐµÑ‚ÑÑ Ð²ÐµÑÑŒÐ¼Ð° ÑƒÐ´Ð¾Ð±Ð½Ñ‹Ð¼ Ð² Ñ‡Ð°ÑÑ‚Ð¸ ÑÐ¸Ñ‚ÑƒÐ°Ñ†Ð¸Ð¹. ÐŸÑ€Ð¸Ð²ÐµÐ´Ñƒ Ð½Ð°Ð³Ð»ÑÐ´Ð½Ñ‹Ð¹ Ð¿Ñ€Ð¸Ð¼ÐµÑ€
Ð¸Ð· ÑÑ‚Ð¾Ð¹ ÑÑ‚Ð°Ñ‚ÑŒÐ¸. (ÐŸÐ¾ÐºÐ° ÐµÑ‘ Ð¼Ð¾Ð¶Ð½Ð¾ Ð¾Ñ‚ÐºÑ€Ñ‹Ñ‚ÑŒ Ñ‚Ð¾Ð»ÑŒÐºÐ¾ Ð² Ð½Ð°Ñ‡Ð°Ð»Ðµ, Ñ‚Ð°Ðº ÐºÐ°Ðº Ñ‚Ð°Ð¼ Ð²Ñ‹ Ð½Ð°Ð¹Ð´ÐµÑ‚Ðµ Ð½Ð°Ñ‡Ð°Ð»Ð¾
Ñ€ÐµÑˆÐµÐ½Ð¸Ñ ðŸ™‚)

Ð”Ð¾Ð¿ÑƒÑÑ‚Ð¸Ð¼, Ñƒ Ð²Ð°Ñ ÐµÑÑ‚ÑŒ Ð¾Ñ‚Ð´ÐµÐ»ÑŒÐ½Ñ‹Ðµ Ñ„ÑƒÐ½ÐºÑ†Ð¸Ð¸, ÐºÐ¾Ñ‚Ð¾Ñ€Ñ‹Ðµ Ð² Ð¸Ñ‚Ð¾Ð³Ðµ Ð²Ñ‹Ñ‡Ð¸ÑÐ»ÑÑŽÑ‚ ÑÐºÐ¸Ð´ÐºÑƒ:

    const multiply20 = (price) => price * 20;
    const divide100 = (price) => price / 100;
    const normalizePrice = (price) => price.toFixed(2);

Ð’ Ð¸Ñ‚Ð¾Ð³Ðµ Ð¼Ñ‹ Ð¿Ð¾Ð»ÑƒÑ‡Ð¸Ð¼ Ñ€ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚, Ð½Ð¾ ÑÑ‚Ð° Ñ†ÐµÐ¿Ð¾Ñ‡ÐºÐ° Ð½Ðµ ÑÐ¾Ð²ÑÐµÐ¼ ÑƒÐ´Ð¾Ð±Ð½Ð°. 
Ð ÐµÑÐ»Ð¸ Ð´ÐµÐ¹ÑÑ‚Ð²Ð¸Ð¹ Ñ‚Ð°Ð¼ Ð±ÑƒÐ´ÐµÑ‚ Ð¼Ð½Ð¾Ð³Ð¾? ÐœÐ¾Ð¶Ð½Ð¾ Ð·Ð°Ð¿ÑƒÑÑ‚Ð¸Ñ‚ÑŒ ÐµÑ‘ Ð²Ð¾Ñ‚ Ñ‚Ð°Ðº:

    // result = a(b(c(x)))
    const discount = normalizePrice(divide100(multiply20(200)));

ÐÐ¾ Ð¿Ñ€Ð¸ ÑƒÐ²ÐµÐ»Ð¸Ñ‡ÐµÐ½Ð¸Ð¸ ÐºÐ¾Ð»Ð¸Ñ‡ÐµÑÑ‚Ð²Ð° Ñ„ÑƒÐ½ÐºÑ†Ð¸Ð¹ ÑÑ‚Ð¾ Ð¿Ñ€ÐµÐ²Ñ€Ð°Ñ‚Ð¸Ñ‚ÑŒÑÑ Ð² Ð½ÐµÑ‡Ð¸Ñ‚Ð°ÐµÐ¼Ñ‹Ð¹ Ð°Ð´. 
Ð˜ Ð²Ð¾Ñ‚ Ð·Ð°Ð´Ð°Ñ‡Ð° ÑÐ¾ÑÑ‚Ð¾Ð¸Ñ‚ Ð² Ñ‚Ð¾Ð¼, Ñ‡Ñ‚Ð¾Ð±Ñ‹ Ð½Ð°Ð¿Ð¸ÑÐ°Ñ‚ÑŒ Ñ„ÑƒÐ½ÐºÑ†Ð¸ÑŽ compose, ÐºÐ¾Ñ‚Ð¾Ñ€Ð°Ñ Ð±ÑƒÐ´ÐµÑ‚ 
Ð¿Ñ€Ð¸Ð½Ð¸Ð¼Ð°Ñ‚ÑŒ Ð²ÑÐµ ÑÑ‚Ð¸ Ñ„ÑƒÐ½ÐºÑ†Ð¸Ð¸ Ð¸ Ð´ÐµÐ»Ð°Ñ‚ÑŒ Ñ‚Ð¾Ð¶Ðµ ÑÐ°Ð¼Ð¾Ðµ. Ð¢Ð¾ ÐµÑÑ‚ÑŒ, Ð¾Ñ€Ð³Ð°Ð½Ð¸Ð·Ð¾Ð²Ñ‹Ð²Ð°Ñ‚ÑŒ 
ÐºÐ¾Ð¼Ð¿Ð¾Ð·Ð¸Ñ†Ð¸ÑŽ Ñ„ÑƒÐ½ÐºÑ†Ð¸Ð¹. ÐžÐ±Ñ€Ð°Ñ‚Ð¸Ñ‚Ðµ Ð²Ð½Ð¸Ð¼Ð°Ð½Ð¸Ðµ Ð½Ð° Ð¿Ð¾Ñ€ÑÐ´Ð¾Ðº Ð·Ð°Ð¿Ð¸ÑÐ¸ Ñ„ÑƒÐ½ÐºÑ†Ð¸Ð¹ - Ð¿Ð¾ÑÐ»ÐµÐ´Ð½ÑÑ 
Ð·Ð°Ð¿Ð¸ÑÐ°Ð½Ð½Ð°Ñ Ð·Ð°Ð¿ÑƒÑÐºÐ°ÐµÑ‚ÑÑ Ð¿ÐµÑ€Ð²Ð¾Ð¹ Ð¸ Ð´Ð°Ð»ÑŒÑˆÐµ ÑÐ¿Ñ€Ð°Ð²Ð° Ð½Ð°Ð»ÐµÐ²Ð¾. Ð’Ð¾Ð·Ð¼Ð¾Ð¶Ð½Ð¾ Ð²Ð°Ð¼ Ð¿Ð¾Ð½Ð°Ð´Ð¾Ð±Ð¸Ñ‚ÑÑ ÑÑ‚Ð¾.

    const discount = compose(normalizePrice, divide100, multiply20);
    discount(200.0);

Ð¤ÑƒÐ½ÐºÑ†Ð¸Ð¹ Ð¼Ð¾Ð¶ÐµÑ‚ Ð±Ñ‹Ñ‚ÑŒ ÑÐºÐ¾Ð»ÑŒÐºÐ¾ ÑƒÐ³Ð¾Ð´Ð½Ð¾ Ð¸ Ð¾Ð½Ð¸ Ð¼Ð¾Ð³ÑƒÑ‚ Ð¿Ñ€Ð¸Ð½Ð¸Ð¼Ð°Ñ‚ÑŒ Ñ‚Ð¾Ð»ÑŒÐºÐ¾ Ð¾Ð´Ð¸Ð½ Ð½Ð°Ñ‡Ð°Ð»ÑŒÐ½Ñ‹Ð¹ Ð°Ñ€Ð³ÑƒÐ¼ÐµÐ½Ñ‚. 
Ð¢Ð°Ðº Ñ‡Ñ‚Ð¾ Ð²Ð°Ñ€Ð¸Ð°Ð½Ñ‚:

const compose = (a, b, c) => (x) => a(b(c(x)));

ÐÐµ Ð¿Ð¾Ð´Ñ…Ð¾Ð´Ð¸Ñ‚, Ñ‚Ð°Ðº ÐºÐ°Ðº Ñ€Ð°Ð±Ð¾Ñ‚Ð°ÐµÑ‚ Ñ‚Ð¾Ð»ÑŒÐºÐ¾ Ñ 3Ð¼Ñ Ñ„ÑƒÐ½ÐºÑ†Ð¸ÑÐ¼Ð¸.


Ð£ÑÐ»Ð¾Ð¶Ð½ÐµÐ½Ð½Ð¾Ðµ Ð·Ð°Ð´Ð°Ð½Ð¸Ðµ!

Ð¡Ð¿Ñ€Ð°Ð²Ð¸Ð»Ð¸ÑÑŒ Ñ Ð¿ÐµÑ€Ð²Ð¾Ð¹ Ñ‡Ð°ÑÑ‚ÑŒÑŽ? Ð¥Ð¾Ñ€Ð¾ÑˆÐ¾, Ð´Ð°Ð²Ð°Ð¹Ñ‚Ðµ ÑƒÑÐ»Ð¾Ð¶Ð½Ð¸Ð¼ ðŸ™‚

Ð Ñ‚ÐµÐ¿ÐµÑ€ÑŒ Ð½Ð°Ð¿Ð¸ÑˆÐ¸Ñ‚Ðµ Ñ„ÑƒÐ½ÐºÑ†Ð¸ÑŽ ÐºÐ¾Ð¼Ð¿Ð¾Ð·Ð¸Ñ†Ð¸Ð¸ composeWithArgs, ÐºÐ¾Ñ‚Ð¾Ñ€Ð°Ñ Ð¿Ñ€Ð¸Ð½Ð¸Ð¼Ð°ÐµÑ‚ ÑÐºÐ¾Ð»ÑŒÐºÐ¾ ÑƒÐ³Ð¾Ð´Ð½Ð¾ 
Ð°Ñ€Ð³ÑƒÐ¼ÐµÐ½Ñ‚Ð¾Ð² Ð² Ð½Ð°Ñ‡Ð°Ð»Ðµ. ÐŸÑ€Ð¸Ð¼ÐµÑ€:

        const add1 = function(a){return a + 1}
        const addAll3 = function(a,b,c){return a + b + c}
        composeWithArgs(add1,addAll3)(1,2,3)  => Ð’ÐµÑ€Ð½ÐµÑ‚ 7

Ð ÐµÑˆÐµÐ½Ð¸Ðµ Ð¾Ñ‚ Ð¿Ñ€ÐµÐ¿Ð¾Ð´Ð°Ð²Ð°Ñ‚ÐµÐ»Ñ.
// ÐœÐ°ÐºÑÐ¸Ð¼Ð°Ð»ÑŒÐ½Ð¾ ÐºÐ¾Ñ€Ð¾Ñ‚ÐºÐ¾Ðµ Ñ€ÐµÑˆÐµÐ½Ð¸Ðµ :)
  const compose = (...fns) => (x) => fns.reduceRight((res, fn) => fn(res), x);

  const composeWithArgs = (...fns) => fns.reduceRight((f, g) => (...args) => g(f(...args)));
        
*/
"use strict";

const myMultiply20 = (price) => price * 20;
const myDivide100 = (price) => price / 100;
const myNormalPrse = (price) => price.toFixed(2);

const myComposeFunction =
  (...args) =>
  (x) =>
    args.reduce((res, fn) => fn(res), x);

const countFunction = myComposeFunction(
  myMultiply20,
  myDivide100,
  myNormalPrse
);

console.log(countFunction(200));
